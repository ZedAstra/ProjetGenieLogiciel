import{t as I,a as v,b as W,c as oe}from"../chunks/BUVNq0sh.js";import{i as ie,v as ne,q as ce,p as se,Z as de,R as ue,$ as me,k as H,l as j,g as r,a0 as A,r as w,t as X,b as le,m as S,s as q,a as B,f as L,c as g}from"../chunks/DVbtH7dG.js";import{l as fe,e as ae,s as ve}from"../chunks/CH7mA5_C.js";import{i as Y}from"../chunks/cO9CbSUo.js";import{j as G,k as E,m as pe,g as be,a as Q,c as re,b as U,e as he,h as ge}from"../chunks/uO1cxeyq.js";import{o as _e}from"../chunks/dt_UomYr.js";import"../chunks/BoQ5mhZH.js";import{u as xe,r as ke,I as ye,a as O,b as Ce,c as ze,B as te}from"../chunks/UBRK0isu.js";import{a as Te,g as Me,c as P,s as Re}from"../chunks/B82cbttc.js";import{i as qe}from"../chunks/CqfLQNa3.js";import{l as De,p as d}from"../chunks/Cq0t-lo4.js";import{D as Ne}from"../chunks/8c6Qml3u.js";import{T as Pe}from"../chunks/CXopf_pT.js";import{T as je}from"../chunks/wfcOfcQ7.js";function we(o,e,y=e){fe(o,"change",p=>{var _=p?o.defaultChecked:o.checked;y(_)}),(ie&&o.defaultChecked!==o.checked||ne(e)==null)&&y(o.checked),ce(()=>{var p=e();o.checked=!!p})}var Ie=I("<label><!></label>"),$e=I('<div><input type="checkbox"> <label><!></label> <!></div>');function Ae(o,e){const y=Te(e),p=De(e,["children","$$slots","$$events","$$legacy"]);se(e,!1);let _=d(e,"id",24,()=>xe("checkbox-")),$=d(e,"name",8,""),b=d(e,"value",8,void 0),f=d(e,"checked",12,!1),t=d(e,"group",12,null),C=d(e,"indeterminate",8,!1),V=d(e,"required",8,!1),x=d(e,"disabled",8,!1),Z=d(e,"fullWidth",8,!1),u=d(e,"size",8,"sm"),k=d(e,"circle",8,!1),i=d(e,"classes",24,()=>({}));const s=Me("Checkbox");function D(){var l;f(((l=t())==null?void 0:l.includes(b()))??!1)}function F(){if(t()!==null){let l=t().includes(b());t(l?t().filter(n=>n!=b()):[...t(),b()])}}de(()=>ue(t()),()=>{t()!==null&&D()}),me(),qe();var m=$e(),a=H(m);ke(a);var z,c=j(a,2),J=H(c);const T=A(()=>C()?Ce:ze),K=A(()=>P("icon","pointer-events-none text-primary-content transition-transform",f()?"scale-100":"scale-0",s.icon,i().icon));ye(J,{get path(){return r(T)},get class(){return r(K)},get size(){return{xs:".75rem",sm:".875rem",md:"1rem",lg:"1.125rem"}[u()]}}),w(c);var R=j(c,2);{var N=l=>{var n=Ie(),h=H(n);Re(h,e,"default",{},null),w(n),X(M=>{O(n,"for",_()),E(n,1,M)},[()=>G(P("label","flex-1","pl-1 peer-disabled:opacity-50",{xs:"text-xs",sm:"text-sm",md:"text-md",lg:"text-lg"}[u()],s.label,i().label))],A),v(l,n)};Y(R,l=>{y.default&&l(N)})}w(m),X((l,n,h)=>{E(m,1,l),O(a,"id",_()),O(a,"name",$()),z!==(z=b())&&(a.value=(a.__value=b())==null?"":b()),E(a,1,n),a.required=V(),a.disabled=x(),O(c,"for",_()),E(c,1,h)},[()=>G(P("Checkbox",Z()?"flex":"inline-flex","items-center",s.root,i().root,p.class)),()=>G(P("input","peer appearance-none absolute",s.input,i().input)),()=>G(P("checkbox","inline-grid place-items-center border-2",k()?"rounded-full":"rounded","peer-disabled:opacity-50 transition-shadow duration-300",!x()&&"peer-hover:border-primary peer-focus-visible:border-primary peer-focus-visible:ring-2 ring-primary/60 ring-offset-1",!f()&&!x()&&"peer-hover:bg-primary/10",f()?x()?"bg-surface-content border-surface-content":"bg-primary border-primary":"border-surface-content/50",s.checkbox,i().checkbox))],A),we(a,f),ae("change",a,F),ae("change",a,function(l){pe.call(this,e,l)}),v(o,m),le()}function Be(o){S();var e=W("Hi");v(o,e)}var Ge=I('<div class="flex flex-col w-96 gap-2 mb-2"></div> <!>',1),Ee=I("<!> <!> <!>",1),Oe=I("<div><!></div>");function ra(o,e){se(e,!0);let y=q(B([])),p=q(B([])),_=q(B([]));be(),_e($);async function $(){const{data:u,error:k}=await Q().GET("/app/projects/{id}/members",{params:{header:{Authorization:U()},path:{id:re()}}});if(k){console.error(k);return}u&&(g(p,u,!0),g(_,r(p).map(s=>({ID:s.id,Nom:`${s.firstName} ${s.lastName}`,Role:s.userRole})),!0));const i=await Q().GET("/app/everyone",{params:{header:{Authorization:U()}}});if(i.error){console.error(i.error);return}i.data&&g(y,i.data.filter(s=>!r(p).some(D=>D.id==s.id)),!0)}let b=[{label:"Membres",value:"members"},{label:"Ressources",value:"resources"}],f=q("members"),t=q(!1),C=q(B([]));async function V(){if(r(C).length==0){alert("Veuillez sélectionner au moins un membre");return}const{data:u,error:k}=await Q().POST("/app/projects/{id}/add_members",{params:{header:{Authorization:U()},path:{id:re()}},body:r(C)});if(k){console.error(k);return}u&&(alert("Membres ajoutés avec succès"),g(t,!1),g(C,[],!0),$())}var x=Oe(),Z=H(x);je(Z,{options:b,get value(){return r(f)},set value(u){g(f,u,!0)},$$slots:{content:(u,k)=>{var i=oe(),s=L(i);{var D=m=>{var a=Ee(),z=L(a);te(z,{class:"my-2 ml-2",variant:"fill-light",color:"primary",onclick:()=>g(t,!0),children:(T,K)=>{S();var R=W("Ajouter des membres");v(T,R)},$$slots:{default:!0}});var c=j(z,2);Ne(c,{classes:{dialog:"p-2"},get open(){return r(t)},set open(T){g(t,T,!0)},children:(T,K)=>{var R=Ge(),N=L(R);he(N,21,()=>r(y),ge,(n,h)=>{Ae(n,{get value(){return r(h).id},get group(){return r(C)},set group(M){g(C,M,!0)},children:(M,We)=>{S();var ee=W();X(()=>ve(ee,`${r(h).firstName} ${r(h).lastName} - ${r(h).userRole}`)),v(M,ee)},$$slots:{default:!0}})}),w(N);var l=j(N,2);te(l,{variant:"fill-light",color:"primary",onclick:V,children:(n,h)=>{S();var M=W("Confirmer");v(n,M)},$$slots:{default:!0}}),v(T,R)},$$slots:{default:!0}});var J=j(c,2);Pe(J,{get data(){return r(_)},columns:[{name:"ID"},{name:"Nom"},{name:"Role"}]}),v(m,a)},F=(m,a)=>{{var z=c=>{Be(c)};Y(m,c=>{r(f)=="resources"&&c(z)},a)}};Y(s,m=>{r(f)=="members"?m(D):m(F,!1)})}v(u,i)}}}),w(x),v(o,x),le()}export{ra as component};
