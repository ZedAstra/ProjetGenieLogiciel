import{a as r,t as u,b as S}from"../chunks/CPxMcCbd.js";import{p as H,c as v,n as X,r as m,t as Y,a as K,f as F,z as C,y as o,q as l,x as I,w as M}from"../chunks/DNSUiAPx.js";import{p as Z,b as ee,r as te,i as re}from"../chunks/BKeh4Tu3.js";import{c as f}from"../chunks/m1Ihia1o.js";import{p as J}from"../chunks/vI2wRnCw.js";import{s as ae,c as se,B as oe}from"../chunks/D4W2DxoK.js";import{C as le,a as ne,b as ie}from"../chunks/D-WWWxAA.js";import{s as de}from"../chunks/BQn61qej.js";import{C as ce}from"../chunks/8VXtJ6mX.js";import{C as pe}from"../chunks/RUndfuxf.js";import{I as O}from"../chunks/BqX89mNG.js";import{L as G,a as fe}from"../chunks/5pIHZPzL.js";import{a as ve,s as me}from"../chunks/DqJa7-ml.js";import{g as ue}from"../chunks/DYcHq17l.js";var _e=u("<p><!></p>");function $e(j,n){H(n,!0);let e=Z(n,"ref",15,null),_=te(n,["$$slots","$$events","$$legacy","ref","class","children"]);var a=_e();let k;var $=v(a);de($,()=>n.children??X),m(a),ee(a,z=>e(z),()=>e()),Y(()=>k=ae(a,k,{class:se("text-muted-foreground text-sm",n.class),..._})),r(j,a),K()}var ge=u("<!> <!>",1),he=u("Se connecter <!>",1),xe=u('<form><div class="grid w-full items-center gap-4"><div class="flex flex-col space-y-1.5"><!> <!></div> <div class="flex flex-col space-y-1.5"><!> <!></div> <!></div></form>'),we=u("<!> <!> <!>",1),be=u('<div class="w-screen h-screen flex items-center justify-center"><!></div>');function De(j,n){H(n,!0);let e=M(!1),_=M(""),a=M("");async function k(){I(e,!0);const g=new FormData;g.append("login",l(_)),g.append("password",l(a));try{const t=await ve("auth/login",{method:"POST",body:g});I(e,!1),t!=null&&t.ok?(me(await t.text()),ue("/app")):(t==null?void 0:t.status)===401?alert("Identifiants incorrects"):alert("An error occurred")}catch{I(e,!1),alert("An error occurred")}}var $=be(),z=v($);f(z,()=>le,(g,t)=>{t(g,{class:"w-[350px]",children:(N,ye)=>{var T=we(),q=F(T);f(q,()=>ne,(h,x)=>{x(h,{children:(A,R)=>{var d=ge(),w=F(d);f(w,()=>pe,(c,y)=>{y(c,{children:(i,L)=>{C();var P=S("Se connecter");r(i,P)},$$slots:{default:!0}})});var b=o(w,2);f(b,()=>$e,(c,y)=>{y(c,{children:(i,L)=>{C();var P=S("Entrez vos identifiants");r(i,P)},$$slots:{default:!0}})}),r(A,d)},$$slots:{default:!0}})});var D=o(q,2);f(D,()=>ie,(h,x)=>{x(h,{children:(A,R)=>{var d=xe(),w=v(d),b=v(w),c=v(b);G(c,{for:"login",children:(s,E)=>{C();var p=S("Identifiant");r(s,p)},$$slots:{default:!0}});var y=o(c,2);O(y,{id:"login",placeholder:"Identifiant (nom ou email)",get disabled(){return l(e)},get value(){return l(_)},set value(s){I(_,J(s))}}),m(b);var i=o(b,2),L=v(i);G(L,{for:"password",children:(s,E)=>{C();var p=S("Mot de passe");r(s,p)},$$slots:{default:!0}});var P=o(L,2);O(P,{id:"password",type:"password",placeholder:"Mot de passe",get disabled(){return l(e)},get value(){return l(a)},set value(s){I(a,J(s))}}),m(i);var U=o(i,2);oe(U,{class:"w-full",get disabled(){return l(e)},onclick:k,children:(s,E)=>{C();var p=he(),V=o(F(p));{var W=B=>{fe(B,{class:"animate-spin"})};re(V,B=>{l(e)&&B(W)})}r(s,p)},$$slots:{default:!0}}),m(w),m(d),r(A,d)},$$slots:{default:!0}})});var Q=o(D,2);f(Q,()=>ce,(h,x)=>{x(h,{class:"flex justify-between"})}),r(N,T)},$$slots:{default:!0}})}),m($),r(j,$),K()}export{De as component};
